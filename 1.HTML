<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>阴没边了都——无限下坠</title>
  <style>
    body { background: #222; color: #fff; text-align: center; margin: 0; }
    canvas { background: #111; display: block; margin: 20px auto; border-radius: 8px; }
    #score { font-size: 24px; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>阴没边了都——无限下坠</h1>
  <div id="score">分数: 0</div>
  <canvas id="game" width="400" height="600"></canvas>
  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    let player = { x: 200, y: 500, r: 15, speed: 5 };
    let obstacles = [];
    let score = 0, gameOver = false, areaWidth = 400;
    function drawPlayer() {
      ctx.beginPath();
      ctx.arc(player.x, player.y, player.r, 0, 2 * Math.PI);
      ctx.fillStyle = '#444';
      ctx.fill();
    }
    function drawObstacles() {
      obstacles.forEach(o => {
        ctx.fillStyle = '#666';
        ctx.fillRect(o.x, o.y, o.w, o.h);
      });
    }
    function updateObstacles() {
      for (let o of obstacles) o.y += 3;
      if (Math.random() < 0.03) {
        let w = 40 + Math.random() * 40;
        let x = Math.random() * (areaWidth - w);
        obstacles.push({ x: x, y: -20, w: w, h: 20 });
      }
      obstacles = obstacles.filter(o => o.y < 600);
    }
    function checkCollision() {
      for (let o of obstacles) {
        if (player.x + player.r > o.x && player.x - player.r < o.x + o.w &&
            player.y + player.r > o.y && player.y - player.r < o.y + o.h) {
          gameOver = true;
        }
      }
    }
    function expandArea() {
      areaWidth += 0.1;
      canvas.width = areaWidth;
    }
    function gameLoop() {
      if (gameOver) {
        ctx.fillStyle = "#fff";
        ctx.font = "36px sans-serif";
        ctx.fillText("阴没边了都！", areaWidth/2 - 100, 300);
        ctx.font = "24px sans-serif";
        ctx.fillText("分数: " + score, areaWidth/2 - 40, 350);
        return;
      }
      ctx.clearRect(0, 0, areaWidth, 600);
      drawPlayer();
      drawObstacles();
      updateObstacles();
      checkCollision();
      score++;
      document.getElementById('score').innerText = "分数: " + score;
      expandArea();
      requestAnimationFrame(gameLoop);
    }
    document.addEventListener('keydown', e => {
      if (e.key === 'a' || e.key === 'ArrowLeft') player.x -= player.speed;
      if (e.key === 'd' || e.key === 'ArrowRight') player.x += player.speed;
      if (player.x < player.r) player.x = player.r;
      if (player.x > areaWidth - player.r) player.x = areaWidth - player.r;
      if (gameOver && (e.key === 'r' || e.key === ' ')) location.reload();
    });
    gameLoop();
  </script>
</body>
</html>